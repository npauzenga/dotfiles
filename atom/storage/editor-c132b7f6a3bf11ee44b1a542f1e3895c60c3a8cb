{"mode":"editor","version":1,"windowDimensions":{"x":0,"y":23,"width":1440,"height":873,"maximized":true},"grammars":{"grammarOverridesByPath":{}},"project":{"deserializer":"Project","paths":["/Users/nate/Documents/Bloc/code/Bloccit"],"buffers":[{"text":"class UsersController < ApplicationController\n  before_action :authenticate_user!\n\n  def update\n    if current_user.update_attributes(user_params)\n      flash[:notice] = \"User information updated\"\n      redirect_to edit_user_registration_path\n    else\n      flash[:error] = \"Invalid user information\"\n      redirect_to edit_user_registration_path\n    end\n  end\n\n  private\n\n  def user_params\n    params.require(:user).permit(:name, :avatar, :email_favorites)\n  end\nend\n","markerStore":{"nextMarkerId":1,"markersById":{"0":{"range":{"start":{"row":0,"column":0},"end":{"row":0,"column":0}},"properties":{"type":"selection","editorId":58,"preserveFolds":true},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}},"version":2},"history":{"version":3,"nextCheckpointId":1,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/nate/Documents/Bloc/code/Bloccit/app/controllers/users_controller.rb","digestWhenLastPersisted":"7a0217ae946cb33950f6bbe7f6492cfcf90d090a","preferredLineEnding":null,"deserializer":"TextBuffer","version":2},{"text":"class PostsController < ApplicationController\n  def show\n    @post = Post.find(params[:id])\n    @topic = Topic.find(params[:topic_id])\n    @comments = @post.comments\n    @comment = Comment.new\n    authorize @post\n    authorize @comment\n    authorize @topic\n  end\n\n  def new\n    @topic = Topic.find(params[:topic_id])\n    @post = Post.new\n    authorize @post\n  end\n\n  def create\n    @topic = Topic.find(params[:topic_id])\n    @post = Post.new(post_params)\n    @post.user = current_user\n    @post.topic = @topic\n\n    authorize @post\n    if @post.save_with_initial_vote\n      flash[:notice] = \"Post was saved.\"\n      redirect_to [@topic, @post]\n    else\n      flash[:error] = \"There was an error saving the post. Please try again.\"\n      render :new\n    end\n  end\n\n  def edit\n    @topic = Topic.find(params[:topic_id])\n    @post = Post.find(params[:id])\n    authorize @post\n  end\n\n  def update\n    @topic = Topic.find(params[:topic_id])\n    @post = Post.find(params[:id])\n    authorize @post\n\n    if @post.update_attributes(post_params)\n      flash[:notice] = \"Post was updated.\"\n      redirect_to [@topic, @post]\n    else\n      flash[:error] = \"There was an error saving the post. Please try again.\"\n      render :edit\n    end\n  end\n\n  def destroy\n    @post = Post.find(params[:id])\n    @topic = Topic.find(params[:topic_id])\n    authorize @post\n\n    if @post.destroy\n      flash[:notice] = \"#{@post.title} was deleted\"\n      redirect_to @topic\n    else\n      flash[:error] = \"Something went wrong\"\n      render :show\n    end\n  end\n\n  private\n\n  def post_params\n    params.require(:post).permit(:title, :body, :post_image)\n  end\nend\n","markerStore":{"nextMarkerId":1,"markersById":{"0":{"range":{"start":{"row":0,"column":0},"end":{"row":0,"column":0}},"properties":{"type":"selection","editorId":66,"preserveFolds":true},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}},"version":2},"history":{"version":3,"nextCheckpointId":1,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/nate/Documents/Bloc/code/Bloccit/app/controllers/posts_controller.rb","digestWhenLastPersisted":"37273e470996f994466df589ed66a8be6efb984d","preferredLineEnding":null,"deserializer":"TextBuffer","version":2},{"text":"<%= form_for [topic, post] do |f| %>\n<% if post.errors.any? %>\n   <div class=\"alert alert-danger\">\n     <h4>There are <%= pluralize(post.errors.count, \"error\") %>.</h4>\n     <ul>\n       <% post.errors.full_messages.each do |msg| %>\n         <li><%= msg %></li>\n       <% end %>\n     </ul>\n   </div>\n <% end %>\n <%= form_group_tag(post.errors[:title]) do %>\n   <%= f.label :title %>\n   <%= f.text_field :title, class: 'form-control', placeholder: \"Enter post title\" %>\n <% end %>\n <%= form_group_tag(post.errors[:body]) do %>\n   <%= f.label :body %>\n   <%= f.text_area :body, rows: 8, class: 'form-control', placeholder: \"Enter post body\" %>\n <% end %>\n <% if post.post_image? %>\n   <div class=\"form-group\">\n     <p>Current Post Image</p>\n     <%= image_tag(post.post_image.url) %>\n   </div>\n <% end %>\n <div class=\"form-group\">\n   <%= f.label :post_image %>\n   <%= f.file_field :post_image %>\n   <%= f.hidden_field :post_image_cache %>\n </div>\n <div class=\"form-group\">\n   <%= f.submit \"Update\", class: 'btn btn-success' %>\n </div>\n <% end %>\n","markerStore":{"nextMarkerId":1,"markersById":{"0":{"range":{"start":{"row":22,"column":42},"end":{"row":22,"column":42}},"properties":{"type":"selection","editorId":78,"goalScreenRange":null,"preserveFolds":true},"reversed":true,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}},"version":2},"history":{"version":3,"nextCheckpointId":2,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/nate/Documents/Bloc/code/Bloccit/app/views/posts/_form.html.erb","digestWhenLastPersisted":"97dfb8fad56df26ab56d6425748e02688ebfba64","preferredLineEnding":null,"deserializer":"TextBuffer","version":2},{"text":"<h1>New Post</h1>\n\n<div class=\"row\">\n  <div class=\"col-md-4\">\n    <p>Guidelines for posts</p>\n    <ul>\n      <li>Make sure it rhymes.</li>\n      <li>Don't use the letter \"A\".</li>\n      <li>The Oxford comma is not optional.</li>\n    </ul>\n  </div>\n  <div class=\"col-md-8\">\n\n    <%= render partial: \"form\", locals: { topic: @topic, post: @post } %>\n\n  </div>\n</div>\n","markerStore":{"nextMarkerId":3,"markersById":{"0":{"range":{"start":{"row":0,"column":0},"end":{"row":0,"column":0}},"properties":{"type":"selection","editorId":82,"preserveFolds":true},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true},"1":{"range":{"start":{"row":0,"column":1},"end":{"row":0,"column":3}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":false},"2":{"range":{"start":{"row":0,"column":14},"end":{"row":0,"column":16}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":false}},"version":2},"history":{"version":3,"nextCheckpointId":1,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/nate/Documents/Bloc/code/Bloccit/app/views/posts/new.html.erb","digestWhenLastPersisted":"18e124b92b460d6c9157975a09ea4a8e1dc856ca","preferredLineEnding":null,"deserializer":"TextBuffer","version":2},{"text":"class User < ActiveRecord::Base\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable, :confirmable\n  has_many :posts, dependent: :destroy\n  has_many :comments, dependent: :destroy\n  has_many :votes, dependent: :destroy\n  has_many :favorites, dependent: :destroy\n  mount_uploader :avatar, AvatarUploader\n\n  def admin?\n    role == \"admin\"\n  end\n\n  def moderator?\n    role == \"moderator\"\n  end\n\n  def favorited(post)\n    favorites.find_by(post_id: post.id)\n  end\n\n  def voted(post)\n    votes.find_by(post_id: post.id)\n  end\nend\n","markerStore":{"nextMarkerId":1,"markersById":{"0":{"range":{"start":{"row":0,"column":0},"end":{"row":0,"column":0}},"properties":{"type":"selection","editorId":86,"preserveFolds":true},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}},"version":2},"history":{"version":3,"nextCheckpointId":1,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/nate/Documents/Bloc/code/Bloccit/app/models/user.rb","digestWhenLastPersisted":"7ebc89620c3c46dd7540357d6ca01d969601d0a1","preferredLineEnding":null,"deserializer":"TextBuffer","version":2},{"text":"<h2>Sign in</h2>\n\n<div class=\"row\">\n  <div class=\"col-md-8\">\n    <%= form_for(resource, as: resource_name, url: session_path(resource_name)) do |f| %>\n      <%= devise_error_messages! %>\n      <div class=\"form-group\">\n        <%= f.label :email %>\n        <%= f.email_field :email, autofocus: true, class: 'form-control', placeholder: \"Enter email\" %>\n      </div>\n      <div class=\"form-group\">\n        <%= f.label :password %>\n        <%= f.password_field :password, class: 'form-control', placeholder: \"Enter password\" %>\n      </div>\n      <div class=\"form-group\">\n        <% if devise_mapping.rememberable? %>\n          <%= f.label :remember_me, class: 'checkbox' do %>\n            <%= f.check_box :remember_me %> Remember me\n          <% end %>\n        <% end %>\n        <%= f.submit \"Sign in\", class: 'btn btn-success' %>\n      </div>\n      <div class=\"form-group\">\n        <%= render \"devise/shared/links\" %>\n      </div>\n    <% end %>\n  </div>\n</div>\n","markerStore":{"nextMarkerId":3,"markersById":{"0":{"range":{"start":{"row":0,"column":0},"end":{"row":0,"column":0}},"properties":{"type":"selection","editorId":90,"preserveFolds":true},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true},"1":{"range":{"start":{"row":0,"column":1},"end":{"row":0,"column":3}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":false},"2":{"range":{"start":{"row":0,"column":13},"end":{"row":0,"column":15}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":false}},"version":2},"history":{"version":3,"nextCheckpointId":1,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/nate/Documents/Bloc/code/Bloccit/app/views/devise/sessions/new.html.erb","digestWhenLastPersisted":"d99298531d06e1e0ff08daf554bb88445f85d6f3","preferredLineEnding":null,"deserializer":"TextBuffer","version":2},{"text":"<!DOCTYPE html>\n<html>\n<head>\n  <title>Bloccit</title>\n  <meta name=\"viewport\" content=\"width=device-width\" initial-scale=\"1\">\n  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>\n  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>\n  <%= csrf_meta_tags %>\n</head>\n<body>\n  <div class=\"container\">\n    <ul class=\"nav nav-tabs\">\n      <li><%= link_to \"Home\", root_path %></li>\n      <li><%= link_to \"About\", about_path %></li>\n\n      <div class=\"pull-right user-info\">\n        <% if current_user %>\n          <%= image_tag(current_user.avatar.tiny.url) if current_user.avatar? %>\n          Hello <%= link_to (current_user.name || current_user.email), edit_user_registration_path %>!\n                <%= link_to \"Sign out\", destroy_user_session_path, method: :delete %>\n        <% else %>\n          <%= link_to \"Sign In\", new_user_session_path %> or\n          <%= link_to \"Sign Up\", new_user_registration_path %>\n        <% end %>\n      </div>\n    </ul>\n\n    <% if flash[:notice] %>\n      <div class=\"alert alert-success\">\n        <button type=\"button\" class=\"close\" data-dismiss=\"alert\">&times;</button>\n       <%= flash[:notice] %>\n     </div>\n    <% elsif flash[:error] %>\n     <div class=\"alert alert-danger\">\n     <button type=\"button\" class=\"close\" data-dismiss=\"alert\">&times;</button>\n     <%= flash[:error] %>\n     </div>\n   <% elsif flash[:alert] %>\n     <div class=\"alert alert-warning\">\n       <button type=\"button\" class=\"close\" data-dismiss=\"alert\">&times;</button>\n       <%= flash[:alert] %>\n     </div>\n   <% end %>\n\n  <%= yield %>\n  </div>\n\n</body>\n</html>\n","markerStore":{"nextMarkerId":1,"markersById":{"0":{"range":{"start":{"row":0,"column":0},"end":{"row":0,"column":0}},"properties":{"type":"selection","editorId":94,"preserveFolds":true},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}},"version":2},"history":{"version":3,"nextCheckpointId":1,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/nate/Documents/Bloc/code/Bloccit/app/views/layouts/application.html.erb","digestWhenLastPersisted":"37d2db12548ac49238be82049881d7a91557f27d","preferredLineEnding":null,"deserializer":"TextBuffer","version":2},{"text":"<div class=\"row\">\n  <div class=\"col-md-8\">\n    <div class=\"media\">\n      <% if @user.avatar? %>\n        <div class=\"media-left\">\n          <%= image_tag @user.avatar.url, class: 'media-object' %>\n        </div>\n      <% end %>\n      <div class=\"media-body\">\n        <h2 class=\"media-heading\"><%= @user.name %></h2>\n        <small>\n          <%= pluralize(@user.posts.count, 'post') %>,\n          <div class=\"js-comments-count\"><%= pluralize(@user.comments.count, \"comment\") %></div>\n        </small>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class=\"row\">\n  <div class=\"tabbable tabs-left\">\n    <ul class=\"nav nav-tabs\">\n      <li class=\"active\"><a href=\"#posts\" data-toggle=\"tab\">Posts</a></li>\n      <li><a href=\"#comments\" data-toggle=\"tab\">Comments</a></li>\n    </ul>\n    <div class=\"tab-content\">\n      <div class=\"tab-pane active\" id=\"posts\">\n        <%= render @posts %>\n      </div>\n      <div class=\"tab-pane\" id=\"comments\">\n        <%= render @comments %>\n      </div>\n    </div>\n  </div>\n</div>\n","markerStore":{"nextMarkerId":3,"markersById":{"0":{"range":{"start":{"row":0,"column":0},"end":{"row":0,"column":0}},"properties":{"type":"selection","editorId":98,"preserveFolds":true},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true},"1":{"range":{"start":{"row":0,"column":1},"end":{"row":0,"column":4}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":false},"2":{"range":{"start":{"row":17,"column":2},"end":{"row":17,"column":5}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":false}},"version":2},"history":{"version":3,"nextCheckpointId":1,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/nate/Documents/Bloc/code/Bloccit/app/views/users/show.html.erb","digestWhenLastPersisted":"c2bf126601a9414e571bcc8f9bc67b935775b060","preferredLineEnding":null,"deserializer":"TextBuffer","version":2},{"text":"require 'faker'\n\n# Create generic members\n5.times do\n  user = User.new(\n    name:     Faker::Name.name,\n    email:    Faker::Internet.email,\n    password: Faker::Lorem.characters(10)\n  )\n  user.skip_confirmation!\n  user.save!\nend\nusers = User.all\n\n# Create topics\n150.times do\n  Topic.create!(\n    name:        Faker::Hipster.sentence,\n    description: Faker::Hipster.paragraph\n  )\nend\ntopics = Topic.all\n\n# create posts\n500.times do\n  post = Post.create!(\n    user:   users.sample,\n    topic:  topics.sample,\n    title:  Faker::Hipster.sentence,\n    body:   Faker::Hipster.paragraph\n  )\n\n  post.update_attributes!(created_at: rand(10.minutes .. 1.year).ago)\n  post.update_rank\n  post.create_vote\nend\nposts = Post.all\n\n# create summaries\n50.times do\n  Summary.create!(\n    post: posts.sample,\n    body: Faker::Hipster.paragraph\n  )\nend\n\n# create comments\n100.times do\n  Comment.create!(\n    user: users.sample,\n    post: posts.sample,\n    body: Faker::Hipster.paragraph\n  )\nend\n\n# create questions\n10.times do\n  Question.create!(\n    title: Faker::Hipster.sentence,\n    body: Faker::Hipster.paragraph,\n    resolved: false\n  )\nend\n\n# create advertisements\n10.times do\n  Advertisement.create!(\n    title: Faker::Lorem.sentence,\n    copy: Faker::Lorem.paragraph,\n    price: Faker::Commerce.price\n  )\nend\n\n# Create an admin user\nadmin = User.new(\n  name:     \"Admin User\",\n  email:    \"admin@example.com\",\n  password: \"helloworld\",\n  role:     \"admin\"\n)\nadmin.skip_confirmation!\nadmin.save!\n\n# Create a moderator\nmoderator = User.new(\n  name:     'Moderator User',\n  email:    'moderator@example.com',\n  password: 'helloworld',\n  role:     'moderator'\n)\nmoderator.skip_confirmation!\nmoderator.save!\n\n# Create a member\nmember = User.new(\n  name:     'Member User',\n  email:    'member@example.com',\n  password: 'helloworld'\n)\nmember.skip_confirmation!\nmember.save!\n\nputs \"Seed finished\"\nputs \"#{Summary.count} summaries created\"\nputs \"#{User.count} users created\"\nputs \"#{Post.count} posts created\"\nputs \"#{Comment.count} comments created\"\nputs \"#{Advertisement.count} advertisements created\"\nputs \"#{Question.count} questions created\"\n","markerStore":{"nextMarkerId":1,"markersById":{"0":{"range":{"start":{"row":0,"column":0},"end":{"row":0,"column":0}},"properties":{"type":"selection","editorId":102,"preserveFolds":true},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}},"version":2},"history":{"version":3,"nextCheckpointId":1,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/nate/Documents/Bloc/code/Bloccit/db/seeds.rb","digestWhenLastPersisted":"12b50149cad9232456f96585f747d858f77834d6","preferredLineEnding":null,"deserializer":"TextBuffer","version":2},{"text":"Rails.application.routes.draw do\n  get 'comments/create'\n\n  resources :questions\n  resources :advertisements, only: [:index, :show]\n  devise_for :users\n  resources :users, only: [:update]\n\n  resources :topics do\n    resources :posts, except: [:index]\n  end\n\n  resources :posts, shallow: true do\n    resources :summaries\n  end\n\n  resources :posts, only: [] do\n    resources :comments, only: [:create, :destroy]\n    resources :favorites, only: [:create, :destroy]\n\n    post \"/up-vote\" => \"votes#up_vote\", as: :up_vote\n    post \"/down-vote\" => \"votes#down_vote\", as: :down_vote\n  end\n\n  get 'about' => 'welcome#about'\n  get 'welcome/contact'\n\n  root to: 'welcome#index'\nend\n","markerStore":{"nextMarkerId":1,"markersById":{"0":{"range":{"start":{"row":0,"column":0},"end":{"row":0,"column":0}},"properties":{"type":"selection","editorId":106,"preserveFolds":true},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}},"version":2},"history":{"version":3,"nextCheckpointId":1,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/nate/Documents/Bloc/code/Bloccit/config/routes.rb","digestWhenLastPersisted":"d8e4b03b3c4e1f138e86fc99b70e719da915720d","preferredLineEnding":null,"deserializer":"TextBuffer","version":2},{"text":"<h2>Edit <%= resource_name.to_s.humanize %></h2>\n\n<div class=\"row\">\n  <div class=\"col-md-8\">\n    <h3>Change email or password</h3>\n    <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :patch }) do |f| %>\n      <%= devise_error_messages! %>\n      <div class=\"form-group\">\n        <%= f.label :email %>\n        <%= f.email_field :email, class: 'form-control', placeholder: \"Enter email\" %>\n      </div>\n      <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>\n        <div class=\"form-group\">\n          <p>Waiting confirmation for:</p>\n          <%= resource.unconfirmed_email %>\n        </div>\n      <% end %>\n      <div class=\"form-group\">\n        <%= f.label :password %>\n        <%= f.password_field :password, class: 'form-control', placeholder: \"Enter password\" %>\n        <i>(leave blank if you don't want to change it)</i>\n      </div>\n      <div class=\"form-group\">\n        <%= f.label :password_confirmation %>\n        <%= f.password_field :password_confirmation, class: 'form-control', placeholder: \"Enter password confirmation\" %>\n      </div>\n      <div class=\"form-group\">\n        <%= f.password_field :current_password, class: 'form-control', placeholder: \"Enter password\" %>\n        <i>(we need your current password to confirm your changes)</i>\n      </div>\n      <div class=\"form-group\">\n        <%= f.submit \"Update\", class: 'btn btn-success' %>\n      </div>\n    <% end %>\n\n    <h3>Edit personal information</h3>\n    <%= form_for(current_user) do |f| %>\n      <div class=\"form-group\">\n        <%= f.label :name %>\n        <%= f.text_field :name, class: 'form-control', placeholder: \"Enter name\", autofocus: true %>\n      </div>\n      <% if current_user.avatar? %>\n        <div class=\"form-group\">\n          <p>Current Avatar</p>\n          <%= image_tag(current_user.avatar.profile.url) %>\n        </div>\n        <% end %>\n        <div class=\"form-group\">\n          <%= f.label :avatar %>\n          <%= f.file_field :avatar %>\n          <%= f.hidden_field :avatar_cache %>\n        </div>\n        <div class=\"form-group\">\n          <%= f.label :email_favorites %>\n          <%= f.check_box :email_favorites %>\n          <p class=\"help-block\">Be notified for new comments on your favorites</p>\n        </div>\n      <div class=\"form-group\">\n        <%= f.submit \"Update\", class: 'btn btn-success' %>\n      </div>\n    <% end %>\n\n    <h3>Cancel my account</h3>\n    <div class=\"form-group\">\n        <p><%= button_to \"Cancel my account\", registration_path(resource_name), data: { confirm: \"Are you sure?\" }, method: :delete, class: 'btn btn-danger' %></p>\n    </div>\n  </div>\n</div>\n","markerStore":{"nextMarkerId":5,"markersById":{"0":{"range":{"start":{"row":0,"column":0},"end":{"row":0,"column":0}},"properties":{"type":"selection","editorId":110,"preserveFolds":true},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true},"3":{"range":{"start":{"row":0,"column":1},"end":{"row":0,"column":3}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":false},"4":{"range":{"start":{"row":0,"column":45},"end":{"row":0,"column":47}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":false}},"version":2},"history":{"version":3,"nextCheckpointId":1,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/nate/Documents/Bloc/code/Bloccit/app/views/devise/registrations/edit.html.erb","digestWhenLastPersisted":"e711b8f2dc0e8519a1ee8e08e8a3ffef178e2615","preferredLineEnding":null,"deserializer":"TextBuffer","version":2},{"text":"class FavoriteMailer < ApplicationMailer\n  default from: \"example@falseemail.com\"\n\n  def new_comment(user, post, comment)\n    # New Headers\n    headers[\"Message-ID\"] = \"<comments/#{comment.id}@your-app-name.example>\"\n    headers[\"In-Reply-To\"] = \"<post/#{post.id}@your-app-name.example>\"\n    headers[\"References\"] = \"<post/#{post.id}@your-app-name.example>\"\n\n    @user = user\n    @post = post\n    @comment = comment\n\n    mail(to: user.email, subject: \"New comment on #{post.title}\")\n  end\nend\n","markerStore":{"nextMarkerId":1,"markersById":{"0":{"range":{"start":{"row":0,"column":0},"end":{"row":0,"column":0}},"properties":{"type":"selection","editorId":114,"preserveFolds":true},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}},"version":2},"history":{"version":3,"nextCheckpointId":1,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/nate/Documents/Bloc/code/Bloccit/app/mailers/favorite_mailer.rb","digestWhenLastPersisted":"33be8a876af8232dbd06d6f163dd012ab1fff980","preferredLineEnding":null,"deserializer":"TextBuffer","version":2},{"text":"class ApplicationMailer < ActionMailer::Base\n  default from: \"from@example.com\"\n  layout \"mailer\"\nend\n","markerStore":{"nextMarkerId":1,"markersById":{"0":{"range":{"start":{"row":0,"column":0},"end":{"row":0,"column":0}},"properties":{"type":"selection","editorId":118,"preserveFolds":true},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}},"version":2},"history":{"version":3,"nextCheckpointId":1,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/nate/Documents/Bloc/code/Bloccit/app/mailers/application_mailer.rb","digestWhenLastPersisted":"79afbabf0317d864606ce6383f54416d946d80e0","preferredLineEnding":null,"deserializer":"TextBuffer","version":2},{"text":"class Comment < ActiveRecord::Base\n  belongs_to :post\n  belongs_to :user\n\n  validates :body, length: { minimum: 5 }, presence: true\n  validates :user, presence: true\n\n  after_create :send_favorite_emails\n\n  default_scope { order(\"updated_at DESC\") }\n\n  private\n\n  def send_favorite_emails\n    post.favorites.each do |favorite|\n      if should_receiver_update_for?(favorite)\n        FavoriteMailer.new_comment(favorite.user, post, self).deliver_now\n      end\n    end\n  end\n\n  def should_receiver_update_for?(favorite)\n    user_id != favorite.user_id && favorite.user.email_favorites?\n  end\nend\n","markerStore":{"nextMarkerId":1,"markersById":{"0":{"range":{"start":{"row":0,"column":0},"end":{"row":0,"column":0}},"properties":{"type":"selection","editorId":122,"preserveFolds":true},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}},"version":2},"history":{"version":3,"nextCheckpointId":1,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/nate/Documents/Bloc/code/Bloccit/app/models/comment.rb","digestWhenLastPersisted":"5cac027acb91073955b63e7c13b2977a65aef1ec","preferredLineEnding":null,"deserializer":"TextBuffer","version":2},{"text":"class CreateComments < ActiveRecord::Migration\n  def change\n    create_table :comments do |t|\n      t.text :body\n      t.references :post, index: true, foreign_key: true\n\n      t.timestamps null: false\n    end\n  end\nend\n","markerStore":{"nextMarkerId":1,"markersById":{"0":{"range":{"start":{"row":0,"column":0},"end":{"row":0,"column":0}},"properties":{"type":"selection","editorId":126,"preserveFolds":true},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}},"version":2},"history":{"version":3,"nextCheckpointId":1,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/nate/Documents/Bloc/code/Bloccit/db/migrate/20150926175440_create_comments.rb","digestWhenLastPersisted":"47e78c61d37afeed2711d5b73d01b963b1215657","preferredLineEnding":null,"deserializer":"TextBuffer","version":2},{"text":"class AddUserToComments < ActiveRecord::Migration\n  def change\n    add_column :comments, :user_id, :integer\n    add_index :comments, :user_id\n  end\nend\n","markerStore":{"nextMarkerId":1,"markersById":{"0":{"range":{"start":{"row":0,"column":0},"end":{"row":0,"column":0}},"properties":{"type":"selection","editorId":130,"preserveFolds":true},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}},"version":2},"history":{"version":3,"nextCheckpointId":1,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/nate/Documents/Bloc/code/Bloccit/db/migrate/20151011152803_add_user_to_comments.rb","digestWhenLastPersisted":"e2ff0cddfcb9a8bd5fb0f2f350790964e6b80de9","preferredLineEnding":null,"deserializer":"TextBuffer","version":2},{"text":"class WelcomeController < ApplicationController\n  def index\n  end\n\n  def about\n  end\n\n  def contact\n  end\nend\n","markerStore":{"nextMarkerId":1,"markersById":{"0":{"range":{"start":{"row":0,"column":0},"end":{"row":0,"column":0}},"properties":{"type":"selection","editorId":148,"preserveFolds":true},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}},"version":2},"history":{"version":3,"nextCheckpointId":1,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/nate/Documents/Bloc/code/Bloccit/app/controllers/welcome_controller.rb","digestWhenLastPersisted":"3293775dd2f3053a3526df667b56aa6b39122cd5","preferredLineEnding":null,"deserializer":"TextBuffer","version":2},{"text":"--color\n--require spec_helper\n","markerStore":{"nextMarkerId":1,"markersById":{"0":{"range":{"start":{"row":1,"column":0},"end":{"row":1,"column":21}},"properties":{"type":"selection","editorId":166,"goalScreenRange":null},"reversed":true,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true}},"version":2},"history":{"version":3,"nextCheckpointId":2,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/nate/Documents/Bloc/code/Bloccit/.rspec","digestWhenLastPersisted":"5d3b552804c91464b16b91a98432c3aa74ffb678","preferredLineEnding":null,"deserializer":"TextBuffer","version":2}]},"workspace":{"deserializer":"Workspace","paneContainer":{"deserializer":"PaneContainer","version":1,"root":{"deserializer":"Pane","id":3,"items":[{"deserializer":"TextEditor","id":58,"softTabs":true,"displayBuffer":{"deserializer":"DisplayBuffer","id":59,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/nate/Documents/Bloc/code/Bloccit/app/controllers/users_controller.rb","largeFileMode":false},"largeFileMode":false}},{"deserializer":"TextEditor","id":90,"softTabs":true,"displayBuffer":{"deserializer":"DisplayBuffer","id":91,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/nate/Documents/Bloc/code/Bloccit/app/views/devise/sessions/new.html.erb","largeFileMode":false},"largeFileMode":false}},{"deserializer":"TextEditor","id":94,"softTabs":true,"scrollRow":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":95,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/nate/Documents/Bloc/code/Bloccit/app/views/layouts/application.html.erb","largeFileMode":false},"largeFileMode":false}},{"deserializer":"TextEditor","id":98,"softTabs":true,"displayBuffer":{"deserializer":"DisplayBuffer","id":99,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/nate/Documents/Bloc/code/Bloccit/app/views/users/show.html.erb","largeFileMode":false},"largeFileMode":false}},{"deserializer":"TextEditor","id":110,"softTabs":true,"scrollRow":0,"scrollColumn":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":111,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/nate/Documents/Bloc/code/Bloccit/app/views/devise/registrations/edit.html.erb","largeFileMode":false},"largeFileMode":false}},{"deserializer":"TextEditor","id":114,"softTabs":true,"displayBuffer":{"deserializer":"DisplayBuffer","id":115,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/nate/Documents/Bloc/code/Bloccit/app/mailers/favorite_mailer.rb","largeFileMode":false},"largeFileMode":false}},{"deserializer":"TextEditor","id":122,"softTabs":true,"displayBuffer":{"deserializer":"DisplayBuffer","id":123,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/nate/Documents/Bloc/code/Bloccit/app/models/comment.rb","largeFileMode":false},"largeFileMode":false}},{"deserializer":"TextEditor","id":126,"softTabs":true,"displayBuffer":{"deserializer":"DisplayBuffer","id":127,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/nate/Documents/Bloc/code/Bloccit/db/migrate/20150926175440_create_comments.rb","largeFileMode":false},"largeFileMode":false}},{"deserializer":"TextEditor","id":130,"softTabs":true,"displayBuffer":{"deserializer":"DisplayBuffer","id":131,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/nate/Documents/Bloc/code/Bloccit/db/migrate/20151011152803_add_user_to_comments.rb","largeFileMode":false},"largeFileMode":false}},{"deserializer":"TextEditor","id":148,"softTabs":true,"displayBuffer":{"deserializer":"DisplayBuffer","id":149,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/nate/Documents/Bloc/code/Bloccit/app/controllers/welcome_controller.rb","largeFileMode":false},"largeFileMode":false}},{"deserializer":"TextEditor","id":166,"softTabs":true,"displayBuffer":{"deserializer":"DisplayBuffer","id":167,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/nate/Documents/Bloc/code/Bloccit/.rspec","largeFileMode":false},"largeFileMode":false}},{"deserializer":"TextEditor","id":118,"softTabs":true,"displayBuffer":{"deserializer":"DisplayBuffer","id":119,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/nate/Documents/Bloc/code/Bloccit/app/mailers/application_mailer.rb","largeFileMode":false},"largeFileMode":false}},{"deserializer":"TextEditor","id":102,"softTabs":true,"scrollRow":67,"displayBuffer":{"deserializer":"DisplayBuffer","id":103,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/nate/Documents/Bloc/code/Bloccit/db/seeds.rb","largeFileMode":false},"largeFileMode":false}},{"deserializer":"TextEditor","id":106,"softTabs":true,"displayBuffer":{"deserializer":"DisplayBuffer","id":107,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/nate/Documents/Bloc/code/Bloccit/config/routes.rb","largeFileMode":false},"largeFileMode":false}},{"deserializer":"TextEditor","id":66,"softTabs":true,"scrollRow":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":67,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/nate/Documents/Bloc/code/Bloccit/app/controllers/posts_controller.rb","largeFileMode":false},"largeFileMode":false}},{"deserializer":"TextEditor","id":86,"softTabs":true,"displayBuffer":{"deserializer":"DisplayBuffer","id":87,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/nate/Documents/Bloc/code/Bloccit/app/models/user.rb","largeFileMode":false},"largeFileMode":false}},{"deserializer":"TextEditor","id":78,"softTabs":true,"displayBuffer":{"deserializer":"DisplayBuffer","id":79,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/nate/Documents/Bloc/code/Bloccit/app/views/posts/_form.html.erb","largeFileMode":false},"largeFileMode":false}},{"deserializer":"TextEditor","id":82,"softTabs":true,"displayBuffer":{"deserializer":"DisplayBuffer","id":83,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/nate/Documents/Bloc/code/Bloccit/app/views/posts/new.html.erb","largeFileMode":false},"largeFileMode":false}}],"activeItemURI":"/Users/nate/Documents/Bloc/code/Bloccit/.rspec","focused":true,"flexScale":1},"activePaneId":3},"packagesWithActiveGrammars":["language-ruby","language-html","language-hyperlink","language-todo"],"destroyedItemURIs":["/Users/nate/Documents/Bloc/code/Bloccit/spec/models/user_spec.rb","/Users/nate/Documents/Bloc/code/Bloccit/spec/controllers/votes_controller_spec.rb","/Users/nate/Documents/Bloc/code/Bloccit/spec/controllers/favorites_controller_spec.rb","/Users/nate/Documents/Bloc/code/Bloccit/spec/controllers/comments_controller_spec.rb","/Users/nate/Documents/Bloc/code/Bloccit/spec/controllers/topics_controller_spec.rb"]},"packageStates":{"fuzzy-finder":{"/Users/nate/Documents/Bloc/code/Bloccit/app/controllers/users_controller.rb":1448652371322,"/Users/nate/Documents/Bloc/code/Bloccit/app/views/devise/sessions/new.html.erb":1448565240898,"/Users/nate/Documents/Bloc/code/Bloccit/app/views/layouts/application.html.erb":1448565270698,"/Users/nate/Documents/Bloc/code/Bloccit/app/views/users/show.html.erb":1448565910132,"/Users/nate/Documents/Bloc/code/Bloccit/app/views/devise/registrations/edit.html.erb":1448565981763,"/Users/nate/Documents/Bloc/code/Bloccit/app/mailers/favorite_mailer.rb":1448571889547,"/Users/nate/Documents/Bloc/code/Bloccit/app/models/comment.rb":1448578657529,"/Users/nate/Documents/Bloc/code/Bloccit/db/migrate/20150926175440_create_comments.rb":1448578672237,"/Users/nate/Documents/Bloc/code/Bloccit/db/migrate/20151011152803_add_user_to_comments.rb":1448652360073,"/Users/nate/Documents/Bloc/code/Bloccit/app/controllers/welcome_controller.rb":1449347435613,"/Users/nate/Documents/Bloc/code/Bloccit/.rspec":1449347446297,"/Users/nate/Documents/Bloc/code/Bloccit/app/mailers/application_mailer.rb":1448571888492,"/Users/nate/Documents/Bloc/code/Bloccit/db/seeds.rb":1448565728438,"/Users/nate/Documents/Bloc/code/Bloccit/config/routes.rb":1448565866209,"/Users/nate/Documents/Bloc/code/Bloccit/app/controllers/posts_controller.rb":1448561749946,"/Users/nate/Documents/Bloc/code/Bloccit/app/models/user.rb":1448561754257,"/Users/nate/Documents/Bloc/code/Bloccit/app/views/posts/_form.html.erb":1447789387441,"/Users/nate/Documents/Bloc/code/Bloccit/app/views/posts/new.html.erb":1447794309767},"keybinding-resolver":{},"metrics":{"sessionLength":45879},"tabs":[{}],"tree-view":{"directoryExpansionStates":{"/Users/nate/Documents/Bloc/code/Bloccit":{"isExpanded":true,"entries":{".bundle":{"isExpanded":false,"entries":{}},".git":{"isExpanded":false,"entries":{}},"app":{"isExpanded":true,"entries":{"assets":{"isExpanded":false,"entries":{}},"controllers":{"isExpanded":true,"entries":{"concerns":{"isExpanded":false,"entries":{}}}},"helpers":{"isExpanded":false,"entries":{}},"mailers":{"isExpanded":false,"entries":{}},"models":{"isExpanded":false,"entries":{}},"policies":{"isExpanded":false,"entries":{}},"uploaders":{"isExpanded":false,"entries":{}},"views":{"isExpanded":false,"entries":{}}}},"bin":{"isExpanded":false,"entries":{}},"config":{"isExpanded":true,"entries":{"environments":{"isExpanded":false,"entries":{}},"initializers":{"isExpanded":false,"entries":{}},"locales":{"isExpanded":false,"entries":{}}}},"db":{"isExpanded":true,"entries":{"migrate":{"isExpanded":true,"entries":{}}}},"lib":{"isExpanded":false,"entries":{}},"log":{"isExpanded":false,"entries":{}},"public":{"isExpanded":false,"entries":{}},"spec":{"isExpanded":true,"entries":{"cassettes":{"isExpanded":false,"entries":{}},"controllers":{"isExpanded":false,"entries":{}},"features":{"isExpanded":false,"entries":{}},"helpers":{"isExpanded":false,"entries":{}},"mailers":{"isExpanded":false,"entries":{}},"models":{"isExpanded":false,"entries":{}},"support":{"isExpanded":false,"entries":{}},"views":{"isExpanded":false,"entries":{}}}},"tmp":{"isExpanded":false,"entries":{}},"vendor":{"isExpanded":false,"entries":{}}}}},"selectedPath":"/Users/nate/Documents/Bloc/code/Bloccit/.rspec","hasFocus":false,"attached":true,"scrollLeft":0,"scrollTop":1447,"width":382},"find-and-replace":{"findOptions":{"findPattern":"@user","replacePattern":"user","pathsPattern":"","useRegex":false,"wholeWord":false,"caseSensitive":false,"inCurrentSelection":false},"findHistory":["confirmable","'","devise.en.yml","@post","posts_path","'","HEAD","application.yml","'","ENV","create_vote","'","@favorite","@post","current_user","'","deliver_now","after_sign_in_path_for","@post","@user","@post","@user"],"replaceHistory":["\"","post","\"","favorite","post","\"","post","user","post","user"],"pathsHistory":["\"","post","\"","favorite","post","\"","post","user","post","user"]}},"fullScreen":false}